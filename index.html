<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#f0f0f0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-title" content="Word Filter">
    <meta name="HandheldFriendly" content="true">
    <meta name="msapplication-tap-highlight" content="no">
    <title>Word Filter</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1></h1>
            <button id="settingsButton" class="settings-button">
                <i class="fas fa-cog"></i>
            </button>
        </div>
        
        <!-- Homepage Content -->
        <div id="homepage" class="homepage-content">
            <div class="selection-container">
                <div class="selection-group">
                    <h2>Select Workflow</h2>
                    <div class="dropdown">
                        <select id="workflowSelect" class="native-select">
                            <option value="">Select a workflow...</option>
                            <option value="create-new">Create New Workflow</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="button-container">
                <button id="createWorkflowButton" class="create-button">Create Workflow</button>
                <button id="performButton" class="perform-button" disabled>Perform Workflow</button>
            </div>
        </div>

        <!-- Workflow Creation Page -->
        <div id="workflowCreation" style="display: none;">
            <div class="workflow-creation">
                <!-- Header with Create/Cancel buttons -->
                <div class="workflow-header">
                    <h2>Create Workflow</h2>
                    <button id="cancelWorkflowButton" class="cancel-button">Cancel</button>
                </div>

                <!-- Workflow name input section -->
                <div class="workflow-name-section">
                    <input type="text" id="workflowName" class="workflow-name-input" placeholder="Enter workflow name">
                    <button id="saveWorkflowButton" class="save-workflow-button">Save Workflow</button>
                </div>

                <!-- Features section -->
                <div class="workflow-content">
                    <!-- Available Features -->
                    <div class="available-features">
                        <h3>Available Features</h3>
                        <div id="availableFeatures">
                            <div class="feature-group">
                                <button class="feature-button" data-feature="position1" draggable="true">Short Word</button>
                                <button class="info-button" data-feature="position1"><i class="fas fa-info-circle"></i></button>
                            </div>
                            <div class="feature-group">
                                <button class="feature-button" data-feature="vowel" draggable="true">Vowel</button>
                                <button class="info-button" data-feature="vowel"><i class="fas fa-info-circle"></i></button>
                            </div>
                            <div class="feature-group">
                                <button class="feature-button" data-feature="o" draggable="true">O?</button>
                                <button class="info-button" data-feature="o"><i class="fas fa-info-circle"></i></button>
                            </div>
                            <div class="feature-group">
                                <button class="feature-button" data-feature="lexicon" draggable="true">Curved Pos.</button>
                                <button class="info-button" data-feature="lexicon"><i class="fas fa-info-circle"></i></button>
                            </div>
                            <div class="feature-group">
                                <button class="feature-button" data-feature="eee" draggable="true">EEE?</button>
                                <button class="info-button" data-feature="eee"><i class="fas fa-info-circle"></i></button>
                            </div>
                            <div class="feature-group">
                                <button class="feature-button" data-feature="originalLex" draggable="true">Lexicon</button>
                                <button class="info-button" data-feature="originalLex"><i class="fas fa-info-circle"></i></button>
                            </div>
                            <div class="feature-group">
                                <button class="feature-button" data-feature="consonant" draggable="true">Cons. Together</button>
                                <button class="info-button" data-feature="consonant"><i class="fas fa-info-circle"></i></button>
                            </div>
                            <div class="feature-group">
                                <button class="feature-button" data-feature="colour3" draggable="true">Colour3</button>
                                <button class="info-button" data-feature="colour3"><i class="fas fa-info-circle"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Selected Features -->
                    <div class="selected-features">
                        <h3>Selected Features</h3>
                        <div id="selectedFeaturesList"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Workflow Execution Page -->
        <div id="workflowExecution" class="workflow-execution" style="display: none;">
            <div class="feature-area" id="featureArea">
                <!-- Features will be dynamically added here -->
            </div>
            <div class="results-container" id="results">
                <!-- Results will be dynamically added here -->
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h2>Settings</h2>
                <div class="settings-options">
                    <label>
                        <input type="checkbox" id="enableColour3" checked>
                        Enable COLOUR3 Feature
                    </label>
                    <label>
                        <input type="checkbox" id="enableVowel" checked>
                        Enable VOWEL Feature
                    </label>
                    <label>
                        <input type="checkbox" id="enableShape" checked>
                        Enable SHAPE Feature
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Feature Info Modals -->
    <div id="featureInfoModals">
        <div id="position1Info" class="feature-info-modal">
            <div class="feature-info-content">
                <h3>Short Word</h3>
                <p><strong>Short Word</strong><br>Input a short word that includes 2 of the spectators chosen consonants.</p>
                <button class="close-info-button">&times;</button>
            </div>
        </div>
        <div id="vowelInfo" class="feature-info-modal">
            <div class="feature-info-content">
                <h3>VOWEL</h3>
                <p><strong>Vowel</strong><br>This MUST follow Short Word. Will cycle through vowels within Short Word.</p>
                <button class="close-info-button">&times;</button>
            </div>
        </div>
        <div id="oInfo" class="feature-info-modal">
            <div class="feature-info-content">
                <h3>O?</h3>
                <p><strong>O?</strong><br>Filters whether or not there is an "O" in the chosen word.</p>
                <button class="close-info-button">&times;</button>
            </div>
        </div>
        <div id="lexiconInfo" class="feature-info-modal">
            <div class="feature-info-content">
                <h3>Curved Pos.</h3>
                <p><strong>Curved Positions</strong><br>In which positions are there curved letters (as caps)- example. 135</p>
                <button class="close-info-button">&times;</button>
            </div>
        </div>
        <div id="eeeInfo" class="feature-info-modal">
            <div class="feature-info-content">
                <h3>EEE?</h3>
                <p><strong>E?</strong><br>Input an "E", an "E" sound, or no E in the second position of the chosen word.</p>
                <button class="close-info-button">&times;</button>
            </div>
        </div>
        <div id="originalLexInfo" class="feature-info-modal">
            <div class="feature-info-content">
                <h3>Original Lex</h3>
                <p><strong>Lexicon</strong><br>Note the lexicon position and possible letters. Enter a word beginning with the letter in that position within the chosen word.</p>
                <button class="close-info-button">&times;</button>
            </div>
        </div>
        <div id="consonantInfo" class="feature-info-modal">
            <div class="feature-info-content">
                <h3>Cons. Together</h3>
                <p><strong>Consonants Together?</strong><br>Are there two consonants together within the chosen word?</p>
                <button class="close-info-button">&times;</button>
            </div>
        </div>
        <div id="colour3Info" class="feature-info-modal">
            <div class="feature-info-content">
                <h3>COLOUR3</h3>
                <p><strong>Colour in 3rd position.</strong><br>Can the spectator think of a colour beginning with the letter in the 3rd position? Yes/No.</p>
                <button class="close-info-button">&times;</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Prevent double-tap zoom
        document.addEventListener('touchend', function(e) {
            if (!e.target.matches('input[type="text"]')) {
                e.preventDefault();
            }
        }, { passive: false });

        // Prevent double-tap zoom on specific elements
        document.querySelectorAll('button, .results-container').forEach(element => {
            element.addEventListener('touchend', function(e) {
                e.preventDefault();
            }, { passive: false });
        });

        // Hide address bar on mobile
        window.addEventListener('load', function() {
            setTimeout(function() {
                window.scrollTo(0, 1);
            }, 0);
        });

        // Prevent bounce effect on iOS
        document.body.addEventListener('touchmove', function(e) {
            if (e.target.closest('.results-container') === null) {
                e.preventDefault();
            }
        }, { passive: false });

        // Add touch event listeners to all buttons
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.style.opacity = '0.8';
            }, { passive: false });

            button.addEventListener('touchend', function(e) {
                e.preventDefault();
                this.style.opacity = '1';
                this.click(); // Trigger the click event
            }, { passive: false });

            button.addEventListener('touchcancel', function(e) {
                e.preventDefault();
                this.style.opacity = '1';
            }, { passive: false });
        });

        // Improve text input handling on mobile
        document.querySelectorAll('input[type="text"]').forEach(input => {
            // Prevent zoom on focus
            input.addEventListener('focus', function() {
                this.style.fontSize = '16px';
                // Scroll the input into view
                setTimeout(() => {
                    this.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 300);
            });

            // Handle input events
            input.addEventListener('input', function() {
                // Ensure proper value handling
                this.value = this.value.trim();
            });

            // Handle blur events
            input.addEventListener('blur', function() {
                // Clean up the value when input loses focus
                this.value = this.value.trim();
            });

            // Prevent unwanted behaviors
            input.addEventListener('touchstart', function(e) {
                e.stopPropagation();
            }, { passive: false });

            input.addEventListener('touchend', function(e) {
                e.stopPropagation();
            }, { passive: false });

            // Ensure keyboard shows up
            input.addEventListener('click', function() {
                this.focus();
            });
        });

        // Settings Modal Functions
        function showSettings() {
            document.getElementById('settingsModal').style.display = 'block';
        }

        function hideSettings() {
            document.getElementById('settingsModal').style.display = 'none';
        }

        // Close settings when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('settingsModal');
            if (event.target === modal) {
                hideSettings();
            }
        }

        // Settings button click handler
        document.getElementById('settingsButton').addEventListener('click', showSettings);
    </script>
</body>
</html> 